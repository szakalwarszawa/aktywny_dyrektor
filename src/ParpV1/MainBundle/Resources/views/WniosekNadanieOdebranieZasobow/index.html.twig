{% extends '::base.html.twig' %}

{% block body %}

<div class="col-sm-12">

    {% for flashMessage in app.session.flashbag.get('warning') %}
        <div class="alert alert-info">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Uwaga!</strong>
            {{ flashMessage }}
        </div>
    {% endfor %}

    <h1>Lista wniosków o nadanie zasobów</h1>

        <div class="row">
            <div class="btn-group col-xs-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">
                <a class="btn btn-success btn col-md-6 fa fa-plus" href="{{ path('wnioseknadanieodebraniezasobow_new') }}">Dodaj wniosek o nadanie uprawnień</a>
                <a class="btn btn-danger btn col-md-6 fa fa-minus" href="{{ path('wnioseknadanieodebraniezasobow_new', {odebranie: 1}) }}">Dodaj wniosek o odebranie uprawnień</a>
            </div>
        </div>
    {% if(zastepstwa|length > 0) %}
        <div class="alert alert-danger">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Uwaga, obecnie masz aktywne zastępstw{{ zastepstwa|length > 1 ? "a" : "o" }} za :</strong>
            <div class="btn-group">
                {% for z in zastepstwa %}
                      <a href="{{ path('userEdit', {samaccountname: z.kogoZastepuje}) }}" class="btn-xs btn-primary" data-toggle="popover" title="Zastępstwo" data-content="Zastępstwo za {{ z.kogoZastepuje }} od  {{ z.dataOd|date("Y-m-d") }} do {{ z.dataDo|date("Y-m-d") }}">{{ z.kogoZastepuje }}</a>
                {% endfor %}
            </div>

        </div>
    {% endif %}
    <ul class="nav nav-tabs">
        <li class="{{ ktore == "oczekujace" ? 'active' : '' }}"><a  href="{{ path('wnioseknadanieodebraniezasobow', {'ktore': 'oczekujace'}) }}">Oczekujące na realizację</a></li>
        <li class="{{ ktore == "wtoku" ? 'active' : '' }}"><a  href="{{ path('wnioseknadanieodebraniezasobow', {'ktore': 'wtoku'}) }}">W toku</a></li>
        <li class="{{ ktore == "zakonczone" ? 'active' : '' }}"><a  href="{{ path('wnioseknadanieodebraniezasobow', {'ktore': 'zakonczone'}) }}">Zakończone</a></li>
        {% if app.user.hasRole('PARP_ADMIN') %}
            <li class="{{ ktore == "wszystkie" ? 'active' : '' }}"><a  href="{{ path('wnioseknadanieodebraniezasobow', {'ktore': 'wszystkie'}) }}">Wszystkie</a></li>
        {% endif %}
    </ul>

    <div class="tab-content">
        <div id="oczekujace" class="tab-pane fade in active">
            {% if ajax_grid %}
                {{ grid(grid,'ParpMainBundle:Grid:grid_jquery_filters.html.twig') }}
            {% else %}
                {{ grid(grid,'ParpMainBundle:Default:index_grid.html.twig') }}
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
