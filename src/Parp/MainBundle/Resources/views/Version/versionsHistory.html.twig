{# {% extends '::base.html.twig' %} #}

{% block body -%}
<div class="col-sm-12">
    <h3>Historia zmian dla obiektu {{entityname}} o id: {{id}} na chwilÄ™: {{now}}</h3>
    <table class="table table-striped table-bordered" style="width:100%;">
            <tr>
                <th>Obiekt</th>
                <th>Operacja</th>
                <th>Data</th>
                <th>User</th>
                <th>Zmiany</th>
            </tr>
            {% for e in entities %}
                <tr>
                    <td>{{e.repo|objectTitles}}</td>
                    <td>{{e.log.action|actionTitles}}</td>
                    <td>{{e.log.loggedAt|date("Y-m-d H:i:s")}}</td>
                    <td>{{e.log.username}}</td>  
                    <td>
                        <div class="panel-group">
                          <div class="panel panel-default">
                            <div class="panel-heading">
                              <h4 class="panel-title">
                                <a data-toggle="collapse" href="#collapse{{e.log.id}}">Lista zmian</a>
                              </h4>
                            </div>
                            <div id="collapse{{e.log.id}}" class="panel-collapse collapse">
                              <ul class="list-group">
                                        
                                {% for c in e.cols %}
                                {%if c in e.log.data|keys %}
                                    <li class="list-group-item">{{c|gridTitles}} : 
                                    <strong style="color:red">
                                    {{attribute(e.entity, c | toCamelcase)|getObjectValue}}
                                    </strong>{%endif%}
                                    </li>
                                {%endfor%} 
                              </ul>
                            </div>
                          </div>
                        </div>
                                     
                    
{#
                        {% for c in columns %}
                        {%if c in e.log.data|keys %}<strong style="color:red">{%endif%}
                        {{attribute(e.entity, c | toCamelcase)|getObjectValue}}
                        {%if c in e.log.data|keys %}</strong>{%endif%}
                        {%endfor%}
 
#}                   </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{%endblock%}