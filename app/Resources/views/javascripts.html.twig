<script>
$("[data-toggle=tooltip").tooltip();
$("table").colResizable();
$('.tagAjaxInputUsers').tagit({
    autocomplete: {delay: 0, minLength: 2, source : '/app_dev.php/user/suggest/'},
    allowSpaces: true
});
$('.tagAjaxInput').tagit({
    allowSpaces: true
});
$(document).ready(function(){
    $('[data-toggle="popover"]').popover({ trigger: "hover", placement: 'bottom' , html: true}); 
});
$('.select2').select2();

$('.datepicker').datetimepicker({
    pickTime: false,
    language: 'pl',
    format: 'YYYY-MM-DD',
});
$('.datetimepicker').datetimepicker({
    pickTime: false,
    language: 'pl',
    format: 'YYYY-MM-DD HH:mm:ss',
});
$('form').areYouSure();

window.onbeforeunload = confirmExit;
function confirmExit() {
    var f = $('form').length > 0 && $('form').hasClass('dirty');
    if(f)
        return ("Masz niezapisane zmiany w formularzu, na pewno chcesz wyjść?");
}
$('form').on('dirty.areYouSure', function() {
  // Enable save button only as the form is dirty.
  $(this).find('input[type="submit"]').removeAttr('disabled');
  $(this).find('input.btncancel').removeAttr('disabled');
});
$('form').on('clean.areYouSure', function() {
  // Form is clean so nothing to save - disable the save button.
  $(this).find('input[type="submit"]').attr('disabled', 'disabled');
  $(this).find('input.btncancel').attr('disabled', 'disabled');
});
function cancelForm(){
    $('input:not(input[type=submit]):not(input[type=button])').each(function(){
        var v1 = $(this).val();
        var v2 = $(this).data('ays-orig');
        console.log('v1 '+v1+' v2 '+v2)
        if(v2 && v2.length > 0 && v1 && v1.length > 0 && v1 != v2)
            $(this).val(v2);        
{#
        if(v1 != v2){
            $(this).addClass('dirty');
        }else{
            $(this).removeClass('dirty');
        }
        
#}
    });
     $('form').trigger('reinitialize.areYouSure');
}
$('*[data-ajaxload]').mouseenter(function() {
    var e=$(this);
    e.off('hover');
    $.get(e.data('ajaxload'),function(d) {
        e.popover({content: d}).popover('show');
    });
}).mouseleave(function() {
    $(this).popover('hide');
});
{#
$('*[data-ajaxload]').bind('hover',function(){
  var e=$(this);
  e.unbind('hover');
  $.get(e.data('ajaxload'),function(d){
      e.popover({content: d}).popover('show');
  });
});
#}

</script>